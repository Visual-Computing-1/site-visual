"use strict";(self.webpackChunkusaco_guide=self.webpackChunkusaco_guide||[]).push([[580],{60973:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(75900),r=n.n(a),l=n(67294);function o(e){var t=e.options,n=e.value,a=e.onChange,o=e.labelMap,s=e.disabled;return l.createElement("span",{className:"relative z-0 inline-flex shadow-sm rounded-md"},t.map((function(e,u){var i;return l.createElement("button",{type:"button",className:r()("relative inline-flex items-center px-4 py-2 border text-sm leading-5 font-medium focus:z-10 focus:outline-none focus:border-blue-300 dark:focus:border-blue-600 focus:shadow-outline-blue transition ease-in-out duration-150",(i={},i["rounded-l-md"]=0===u,i["-ml-px"]=0!==u&&u!==t.length-1,i["-ml-px rounded-r-md"]=u===t.length-1,i["border-blue-600 bg-blue-600 text-white"]=e===n,i["border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-200 hover:text-gray-500 dark:hover:text-gray-100 active:bg-gray-100 active:text-gray-700"]=e!==n,i)),disabled:s,onClick:function(){return a(e)},key:e},o?o[e]:e)})))}},56257:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(67294);function r(e){var t=a.useRef();return a.useEffect((function(){if(t.current){var e=function(e){if("Tab"==e.key){e.preventDefault();var t=this.selectionStart,n=this.selectionEnd;this.value=this.value.substring(0,t)+"\t"+this.value.substring(n),this.selectionStart=this.selectionEnd=t+1}};return t.current.addEventListener("keydown",e),function(){return t.current&&t.current.removeEventListener("keydown",e)}}}),[t.current]),a.createElement("textarea",Object.assign({},e,{ref:t}))}},66525:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(20400),r=n(67294),l=n(47828),o=n(19901),s=n(5560);function u(e){var t=r.useState(null),n=t[0],u=t[1],i=r.useState(null),c=i[0],m=i[1],d=(0,r.useContext)(o.Z).firebaseUser;return(0,s.$)((function(t){var n=null==e?void 0:e.uniqueId;if(n){u(null),m(null);var r=(0,a.ad)(t),o=(0,a.cf)((0,a.IO)((0,a.hJ)(r,"userProblemSolutions"),(0,a.ar)("isPublic","==",!0),(0,a.ar)("problemID","==",n)),{next:function(e){u(e.docs.map((function(e){return Object.assign({id:e.id},e.data())})))},error:function(e){l.ZP.error(e.message)}}),s=d?(0,a.cf)((0,a.IO)((0,a.hJ)(r,"userProblemSolutions"),(0,a.ar)("problemID","==",n),(0,a.ar)("userID","==",d.uid)),{next:function(e){m(e.docs.map((function(e){return Object.assign({id:e.id},e.data())})))},error:function(e){l.ZP.error(e.message)}}):function(){};return function(){o(),s()}}}),[null==e?void 0:e.uniqueId,null==d?void 0:d.uid]),{solutions:n,currentUserSolutions:c}}},32253:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var a=n(25444),r=n(67294),l=n(92346),o=n(84324),s=n(19901),u=n(31114),i=n(15861),c=n(87757),m=n.n(c),d=n(20400),f=n(5560);function b(){var e,t,n,a,l,o=(0,f.$)(),u=(0,r.useContext)(s.Z).firebaseUser;return{submitSolution:(l=(0,i.Z)(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.ET)((0,d.hJ)((0,d.ad)(o),"userProblemSolutions"),Object.assign({},t,{userID:u.uid,userName:u.displayName,upvotes:[],timestamp:d.EK.now()}));case 2:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)}),deleteSolution:(a=(0,i.Z)(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.oe)((0,d.JU)((0,d.ad)(o),"userProblemSolutions",t));case 2:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),mutateSolution:(n=(0,i.Z)(m().mark((function e(t,n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.r7)((0,d.JU)((0,d.ad)(o),"userProblemSolutions",t),n);case 2:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),upvoteSolution:(t=(0,i.Z)(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.r7)((0,d.JU)((0,d.ad)(o),"userProblemSolutions",t),{upvotes:(0,d.vr)(u.uid)});case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),undoUpvoteSolution:(e=(0,i.Z)(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.r7)((0,d.JU)((0,d.ad)(o),"userProblemSolutions",t),{upvotes:(0,d.Ab)(u.uid)});case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}}var g=n(66525),p=n(24403);function v(e){var t=e.onClose,n=e.showSubmitSolutionModal,a=e.problem,i=(0,g.Z)(a),c=i.solutions,m=i.currentUserSolutions,d=b(),f=d.deleteSolution,v=d.upvoteSolution,h=d.undoUpvoteSolution,x=d.mutateSolution,y=(0,r.useContext)(s.Z).firebaseUser,E=r.useContext(l.f).signIn,k=(0,u.Qe)().canModerate,w=null==c?void 0:c.filter((function(e){return e.userID!==(null==y?void 0:y.uid)}));return null==w||w.sort((function(e,t){return t.upvotes.length-e.upvotes.length})),r.createElement("div",{className:"w-full rounded-lg overflow-hidden max-w-5xl mx-auto"},r.createElement("div",{className:"bg-white dark:bg-dark-surface px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},r.createElement("button",{className:"mb-8 btn",onClick:function(){return t()}},r.createElement("svg",{className:"-ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},r.createElement("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})),"Back"),r.createElement("h3",{className:"text-xl leading-6 font-medium text-gray-900 dark:text-gray-100",id:"modal-headline"},"User Solutions for ",null==a?void 0:a.name),r.createElement("p",{className:"mt-1 text-gray-500 dark:text-gray-400"},"Below are user-submitted solutions for ",null==a?void 0:a.name,". If you notice any of them are incorrect, email us at"," ",r.createElement("a",{className:"underline text-blue-600 dark:text-blue-400",href:"mailto:usacoguide@gmail.com",target:"_blank",rel:"noreferrer"},"usacoguide@gmail.com"),"."),r.createElement("button",{className:"my-4 btn-primary",onClick:function(){return y?n():E()}},y?"Submit a Solution":"Sign in to submit a solution"),r.createElement("div",{className:"h-8"}),r.createElement("h3",{className:"text-lg font-semibold pb-2 mb-4 border-b border-gray-200 dark:border-gray-800"},"My Solutions"),r.createElement("div",{className:"space-y-6"},null==m?void 0:m.map((function(e){return r.createElement("div",{key:e.id},r.createElement("h4",{className:"mb-2 text-gray-700 dark:text-gray-100"},e.language?o.kl[e.language]:"Unknown Language"," ","| Votes: ",e.upvotes.length,". (",e.isPublic?"Public":"Private",")"," ",r.createElement("button",{className:"hover:underline text-blue-600 dark:text-blue-300",onClick:function(){confirm("Are you sure you want to delete this submission?")&&f(e.id)}},"(Delete)")),r.createElement("div",{className:"text-sm leading-normal"},r.createElement(p.Z,{className:"unknown"!==e.language?"language-"+e.language:void 0},e.solutionCode)))})),0===(null==m?void 0:m.length)&&r.createElement("span",null,"No solutions yet!")),["cpp","java","py"].map((function(e){return r.createElement(r.Fragment,{key:e},r.createElement("div",{className:"h-8"}),r.createElement("h4",{className:"text-lg font-semibold pb-2 mb-4 border-b border-gray-200 dark:border-gray-800"},"Public ",o.kl[e]," Solutions"),r.createElement("div",{className:"space-y-6"},null==w?void 0:w.filter((function(t){return t.language==e})).map((function(e){var t;return r.createElement("div",{key:e.id},r.createElement("h4",{className:"mb-2 text-gray-700 dark:text-gray-100"},null!==(t=e.userName)&&void 0!==t?t:"Unknown User"," | Votes:"," ",e.upvotes.length,"."," ",(null==y?void 0:y.uid)&&r.createElement("button",{className:"hover:underline text-blue-600 dark:text-blue-300 focus:outline-none",onClick:function(){e.upvotes.includes(null==y?void 0:y.uid)?h(e.id):v(e.id)}},e.upvotes.includes(null==y?void 0:y.uid)?"(Undo Upvote)":"(Upvote)"),k&&r.createElement("button",{className:"hover:underline text-blue-600 dark:text-blue-300 mx-2",onClick:function(){confirm("Are you sure you want to make this solution private? (Currently it's nontrivial to undo this...)")&&x(e.id,{isPublic:!1})}},"(Mark Private as Moderator)"),k&&r.createElement("button",{className:"hover:underline text-blue-600 dark:text-blue-300 mx-2",onClick:function(){confirm("Are you sure you want to delete this solution?")&&f(e.id)}},"(Delete as Moderator)")),r.createElement("div",{className:"text-sm leading-normal"},r.createElement(p.Z,{className:"unknown"!==e.language?"language-"+e.language:void 0},e.solutionCode)))})),0===(null==w?void 0:w.filter((function(t){return t.language==e})).length)&&r.createElement("span",null,"No solutions yet!")))}))))}n(17727);var h=n(38588),x=n(75900),y=n.n(x),E=n(60973),k=n(56257);function w(e){var t=e.isOpen,n=e.onClose,a=e.problem,l=r.useState(""),s=l[0],u=l[1],i=r.useState(""),c=i[0],m=i[1],d=r.useState(!0),f=d[0],g=d[1],p=r.useState(!1),v=p[0],x=p[1],w=r.useState(!1),N=w[0],S=w[1],C=b().submitSolution;r.useEffect((function(){t&&(u(""),g(!0),m(null),x(!1),S(!1))}),[t]);var P=r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement("label",{className:"block font-medium text-gray-700 dark:text-gray-200"},"Solution Code"),r.createElement("div",null,r.createElement("p",{className:"mb-3 text-sm text-gray-500 dark:text-gray-400"},"Please keep these in mind when submitting a solution.",r.createElement("ol",{className:"list-decimal ml-5"},r.createElement("li",null,"Especially if sharing your code, consider cleaning it up and"," ",r.createElement("b",null," adding solution notes")," as a comment at the top."),r.createElement("li",null,"Make sure not to leave out any headers/templates, and that your code passes all test cases!"))),r.createElement(E.Z,{options:["cpp","java","py"],labelMap:o.kl,value:c,onChange:function(e){return m(e)}}),r.createElement("div",{className:"rounded-md shadow-sm mt-3"},r.createElement(k.Z,{rows:10,className:"textarea font-mono",value:s,onChange:function(e){return u(e.target.value)}})))),r.createElement("div",{className:"flex items-center justify-between"},r.createElement("span",{className:"flex-grow flex flex-col",id:"toggleLabel"},r.createElement("span",{className:"leading-5 font-medium text-gray-900 dark:text-gray-100"},"Share Solution Code"),r.createElement("span",{className:"text-sm leading-normal text-gray-500 dark:text-gray-400"},"This will allow other users to view your solution code if they are stuck.")),r.createElement("span",{role:"checkbox",tabIndex:0,onClick:function(){return g(!f)},className:y()("relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:shadow-outline",f?"bg-blue-600":"bg-gray-200")},r.createElement("span",{"aria-hidden":"true",className:y()(f?"translate-x-5":"translate-x-0","relative inline-block h-5 w-5 rounded-full bg-white shadow transform transition ease-in-out duration-200")},r.createElement("span",{className:y()(f?"opacity-0 ease-out duration-100":"opacity-100 ease-in duration-200","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity")},r.createElement("svg",{className:"h-3 w-3 text-gray-400",fill:"none",viewBox:"0 0 12 12"},r.createElement("path",{d:"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),r.createElement("span",{className:y()(f?"opacity-100 ease-in duration-200":"opacity-0 ease-out duration-100","absolute inset-0 h-full w-full flex items-center justify-center transition-opacity")},r.createElement("svg",{className:"h-3 w-3 text-indigo-600",fill:"currentColor",viewBox:"0 0 12 12"},r.createElement("path",{d:"M3.707 5.293a1 1 0 00-1.414 1.414l1.414-1.414zM5 8l-.707.707a1 1 0 001.414 0L5 8zm4.707-3.293a1 1 0 00-1.414-1.414l1.414 1.414zm-7.414 2l2 2 1.414-1.414-2-2-1.414 1.414zm3.414 2l4-4-1.414-1.414-4 4 1.414 1.414z"}))))))),U=r.createElement("div",{className:"rounded-md bg-green-50 dark:bg-green-800 p-4"},r.createElement("div",{className:"flex"},r.createElement("div",{className:"flex-shrink-0"},r.createElement("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},r.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"}))),r.createElement("div",{className:"ml-3"},r.createElement("h3",{className:"text-sm leading-5 font-medium text-green-800 dark:text-dark-high-emphasis"},"Solution Submitted!"),r.createElement("div",{className:"mt-2 text-sm leading-5 text-green-700 dark:text-dark-high-emphasis"},r.createElement("p",null,"Thanks for helping to improve the USACO Guide.")))));return r.createElement(h.u,{show:t,className:"fixed z-30 inset-0 h-full overflow-y-auto"},r.createElement("form",{className:"flex items-end justify-center min-h-full pt-4 px-4 pb-12 text-center sm:block",onSubmit:function(e){e.preventDefault(),s.length<10?alert("Your solution seems too short!"):c?(x(!0),C({isPublic:f,solutionCode:s,problemID:a.uniqueId,language:c}).then((function(){return S(!0)})).catch((function(e){return alert("Error: "+e.message)})).finally((function(){return x(!1)}))):alert("Please select a language.")}},r.createElement(h.u.Child,{className:"fixed inset-0 transition-opacity",enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},r.createElement("div",{className:"absolute inset-0 bg-gray-500 dark:bg-gray-900 opacity-75"})),r.createElement("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​"),r.createElement(h.u.Child,{className:"w-full inline-block align-bottom rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},r.createElement("div",{className:"bg-white dark:bg-dark-surface px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},r.createElement("div",{className:"hidden sm:block absolute top-0 right-0 pt-4 pr-4"},r.createElement("button",{type:"button",onClick:function(){return n()},className:"bg-white dark:bg-dark-surface rounded-md text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400 focus:outline-none"},r.createElement("span",{className:"sr-only"},"Close"),r.createElement("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})))),r.createElement("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-100",id:"modal-headline"},"Submit Solution for ",null==a?void 0:a.name),r.createElement("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Help others out by submitting a solution for ",null==a?void 0:a.name,"!"),r.createElement("div",{className:"mt-6 space-y-6"},N?U:P)),r.createElement("div",{className:"bg-gray-50 dark:bg-gray-900 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},N?r.createElement("span",{className:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},r.createElement("button",{type:"button",onClick:function(){return n()},className:"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-blue-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"},"Done")):r.createElement(r.Fragment,null,r.createElement("span",{className:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},r.createElement("button",{type:"submit",className:"inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-blue-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-blue-500 focus:outline-none focus:border-blue-700 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5",disabled:v},v?"Submitting...":"Submit Solution")),r.createElement("span",{className:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},r.createElement("button",{type:"button",className:"inline-flex justify-center w-full rounded-md border border-gray-300 dark:border-gray-600 px-4 py-2 bg-white dark:bg-gray-800 text-base leading-6 font-medium text-gray-700 dark:text-gray-200 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5",onClick:function(){return n()},disabled:v},"Cancel")))))))}function N(e){var t,n=r.useState(!1),l=n[0],o=n[1],s=null===(t=e.location.state)||void 0===t?void 0:t.problem;if(r.useEffect((function(){s||(0,a.navigate)("/",{replace:!0})}),[]),!s)return null;return r.createElement(r.Fragment,null,r.createElement(v,{onClose:function(){(0,a.navigate)(-1)},showSubmitSolutionModal:function(){o(!0)},problem:s}),r.createElement(w,{problem:s,isOpen:l,onClose:function(){return o(!1)}}))}}}]);
//# sourceMappingURL=component---src-pages-problem-solutions-tsx-258ec165836b691fedac.js.map